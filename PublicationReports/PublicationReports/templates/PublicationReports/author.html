{% extends 'PublicationReports/root.html' %}

{% block body_content %}

<table>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label>ФИО</label><br>
            {{ form.name }}
        </div>
        <div class="form-group">
            <label>Место работы</label><br>
            {{ form.job }}
        </div>
        <div class="form-group">
            <label>Кафедра</label><br>
            {{ form.departament }}
        </div>
        <div class="form-group">
            <label>URL Google Scolar</label><br>
            {{ form.url }}
        </div>
        <input type="submit" class="btn btn-primary d-inline-flex align-items-center" value="Сохранить">
    </form>
    <form action="{% url 'update_publications' author_id %}" method="get">
        {% csrf_token %}
        <button class="btn btn-primary d-inline-flex align-items-center" type="submit">Обновление публикаций из Google Scholar</button>
    </form>
    <form action="{% url 'edit_publications' author_id %}" method="get">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary d-inline-flex align-items-center">Редактирование публикаций вручную</button>
    </form>
    <form action="{% url 'export_to_excel' author_id %}" method="get">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary d-inline-flex align-items-center">Выгрузить в Excel</button>
    </form>
</table>

<table class="table table-bordered">
    <tr>
        <th>№</th>
        <th>Публикация</th>
        <th>Год</th>
        <th>Номер</th>
        <th>Том</th>
        <th>Страницы</th>
        <th>Цитирования</th>
        <th>Журнал</th>
        <th>Издатель</th>
    </tr>
    <tr>
        {% for p in publications %}
        <td>{{ forloop.counter }}</td>
        <td>{{ p.title }}</td>
        <td>{{ p.year }}</td>
        {% if p.number is null %}
        <td></td>
        {% else %}
        <td> {{ p.number }}</td>
        {% endif %}
        {% if p.volume is null %}
        <td></td>
        {% else %}
        <td> {{ p.volume }}</td>
        {% endif %}
        {% if p.pages is null %}
        <td></td>
        {% else %}
        <td> {{ p.pages }}</td>
        {% endif %}
        <td>{{ p.citation }}</td>
        {% if p.journal.name is null %}
        <td></td>
        {% else %}
        <td> {{ p.journal.name }}</td>
        {% endif %}
        {% if p.journal.publisher is null %}
        <td></td>
        {% else %}
        <td> {{ p.journal.publisher }}</td>
        {% endif %}
    <tr>{% endfor %}<br>
    </tr>
</table>
{% endblock body_content %}