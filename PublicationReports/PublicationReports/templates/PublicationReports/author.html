{% extends 'PublicationReports/root.html' %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript}
{% block body_content %}

<form method="post">
    {% bootstrap_form form %}
    {% csrf_token %}
    {% bootstrap_button button_type="submit" content="Сохранить изменения" %}
</form>
<form method="delete">
    {% bootstrap_button button_type="submit" content="Удалить автора" %}
</form>
<form action="{% url 'create_publication' %}" method="get">
    {% csrf_token %}
    <button type="submit" class="btn btn-primary d-inline-flex align-items-center">Добавить публикацию</button>
</form>
<form action="{% url 'update_publications' author_id %}" method="get">
    {% bootstrap_button button_type="submit" content="Обновить публикации" %}
</form>
<form action="{% url 'export_to_excel' author_id %}" method="get">
    {% csrf_token %}
    <a href="{% url 'export_to_excel' 1 %}"><img src="/static/img/excel_icon.png" class="img-fluid" alt="Excel"></a>
</form>

<table class="table table-bordered">
    <tr>
        <th>№</th>
        <th>Название</th>
        <th>Год</th>
        <th>Номер</th>
        <th>Том</th>
        <th>Страницы</th>
        <th>Цитирования</th>
        <th>Журнал</th>
        <th>Издатель</th>
        <th></th>
    </tr>
    <tr>
        {% for p in publications %}
        <td>{{ forloop.counter }}</td>
        <td>{{ p.title }}</td>
        <td>{{ p.year }}</td>
        {% if p.number is null %}
        <td></td>
        {% else %}
        <td> {{ p.number }}</td>
        {% endif %}
        {% if p.volume is null %}
        <td></td>
        {% else %}
        <td> {{ p.volume }}</td>
        {% endif %}
        {% if p.pages is null %}
        <td></td>
        {% else %}
        <td> {{ p.pages }}</td>
        {% endif %}
        <td>{{ p.citation }}</td>
        {% if p.journal.name is null %}
        <td></td>
        {% else %}
        <td> {{ p.journal.name }}</td>
        {% endif %}
        {% if p.journal.publisher is null %}
        <td></td>
        {% else %}
        <td> {{ p.journal.publisher }}</td>
        {% endif %}
        <td><a href="{% url 'edit_publications' 1 p.id %}"><img src="/static/img/edit_icon.png" class="img-fluid"
                                                                alt="Edit"></a></td>
    <tr>{% endfor %}<br>
    </tr>
</table>
{% endblock body_content %}