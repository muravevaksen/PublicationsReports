{% extends 'PublicationReports/root.html' %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript}
{% block body_content %}

{% if perms.catalog.can_update_teacher %}
<form method="post">
    {% bootstrap_form form %}
    {% csrf_token %}
    {% bootstrap_button button_type="submit" content="Сохранить изменения" %}
</form>
<form action="{% url 'delete_author' author_id %}" method="post">
    {% csrf_token %}
    {% bootstrap_button button_type="submit" content="Удалить автора" %}
</form>
<form action="{% url 'create_publication' %}" method="get">
    {% bootstrap_button button_type="submit" content="Добавить публикацию" %}
</form>
<form action="{% url 'update_publications' author_id %}" method="get">
    {% bootstrap_button button_type="submit" content="Обновить публикации" %}
</form>
<form action="{% url 'export_to_excel' author_id %}" method="get">
    <a href="{% url 'export_to_excel' 1 %}">
        <img src="/static/img/excel_icon.png" alt="Excel"></a>
</form>
<br>Всего публикаций:

{% else %}
{{ authors.name }}
<br>{{ authors.job }}
<br>{{ authors.departament.name }}
<br>Всего:
<br>Всего публикаций:
<br>Всего книг:
<br> Всего конференций:

{% endif %}

<table>
    <tr>
        <th>№</th>
        <th>Название</th>
        <th>Год</th>
        <th>Номер</th>
        <th>Том</th>
        <th>Страницы</th>
        <th>Цитирования</th>
        <th>Журнал</th>
        <th>Издатель</th>
        <th></th>
    </tr>
    <tr>
        {% for p in publications %}
        <td>{{ forloop.counter }}</td>
        <td>{{ p.title }}</td>
        <td>{{ p.year }}</td>
        {% if p.number is null %}
        <td></td>
        {% else %}
        <td> {{ p.number }}</td>
        {% endif %}
        {% if p.volume is null %}
        <td></td>
        {% else %}
        <td> {{ p.volume }}</td>
        {% endif %}
        {% if p.pages is null %}
        <td></td>
        {% else %}
        <td> {{ p.pages }}</td>
        {% endif %}
        <td>{{ p.citation }}</td>
        {% if p.journal.name is null %}
        <td></td>
        {% else %}
        <td> {{ p.journal.name }}</td>
        {% endif %}
        {% if p.journal.publisher is null %}
        <td></td>
        {% else %}
        <td> {{ p.journal.publisher }}</td>
        {% endif %}
        <td>
            {% if perms.catalog.can_update_publication %}
            <a href="{% url 'edit_publications' 1 p.id %}">
                <img src="/static/img/edit_icon.png" class="img-fluid" alt="Edit"></a>
            {% endif %}
        </td>
    <tr>{% endfor %}
        <br>
    </tr>
</table>

{% endblock body_content %}